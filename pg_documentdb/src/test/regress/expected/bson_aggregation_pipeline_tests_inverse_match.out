SET search_path TO helio_api,helio_core,helio_api_catalog;
SET helio_api.next_collection_id TO 3900;
SET helio_api.next_collection_index_id TO 3900;
-- Insert data
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 1, "airport_id": 10165, "city": "Adak Island", "state": "AK", "name": "Adak", "rule": { "flight_type": "private"} }', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 3, "airport_id": 11308, "city": "Dothan", "state": "AL", "name": "Dothan Regional", "rule": { "$or": [ { "origin": "WA"}, {"flight_type": "private"}] } }', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 4, "airport_id": 11778, "city": "Fort Smith", "state": "AR", "name": "Fort Smith Regional", "rule": { "$in": [{"is_emergency": true}, {"is_vip": true}] }}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 6, "airport_id": 14689, "city": "Santa Barbara", "state": "CA", "name": "Santa Barbara Municipal", "rule": { "$or": [ {"$and": [{"flight_type": "private"}, {"origin": "CA"}]}, {"$or": [{"is_emergency": true}, {"is_vip": true}]} ] }}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 7, "airport_id": 13442, "city": "Everet", "state": "WA", "name": "Paine Field", "rule": { "tags": { "$all": ["private", "vip"]}}}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
-- positive cases
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AK"}}, { "$inverseMatch": {"path": "rule", "input": {"flight_type": "public"}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AK"}}, { "$inverseMatch": {"path": "rule", "input": {"flight_type": "private"}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AL"}}, { "$inverseMatch": {"path": "rule", "input": {"flight_type": "public"}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AL"}}, { "$inverseMatch": {"path": "rule", "input": {"flight_type": "private"}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AR"}}, { "$inverseMatch": {"path": "rule", "input": {"is_emergency": true}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "CA"}}, { "$inverseMatch": {"path": "rule", "input": { "flight_type": "private", "origin": "CA" }}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "CA"}}, { "$inverseMatch": {"path": "rule", "input": { "flight_type": "public", "origin": "CA" }}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "CA"}}, { "$inverseMatch": {"path": "rule", "input": { "flight_type": "public", "origin": "CA", "is_vip": true }}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "AR"}}, { "$inverseMatch": {"path": "rule", "input": [{ "flight_type": "private"}, {"is_emergency": true}]}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{"$match": {"state": "WA"}}, { "$inverseMatch": {"path": "rule", "input": { "tags": ["private", "vip"]}}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{ "$inverseMatch": {"path": "rule", "input": { "origin": "WA" }}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- Validate errors
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": {"pathRule": "rule", "input": {"flight_type": "private"} }}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": {"path": "rule", "inputValue": {"flight_type": "private"} }}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": {"path": "", "input": {"flight_type": "private"} }}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": ["flight_type", "private"] }}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": [{"flight_type": "private"}, ""] }}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [ { "$inverseMatch": [{"path": "rule", "input": [{"flight_type": "private"}, ""] }, {"path": "rule2", "input": {}}]}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- insert a document with an invalid query
SELECT helio_api.insert_one('invmatch','airports','{ "_id": 8, "airport_id": 13442, "city": "Everet", "state": "WA", "name": "Paine Field", "specialRule": { "tags": { "$allValues": ["private", "vip"]}}}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','airports','{ "_id": ...
               ^
-- any inverseMatch that queries that path should fail
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{ "$inverseMatch": {"path": "specialRule", "input": { "origin": "WA" }, "defaultResult": false}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- if we query "rule" path without defaultResult in the spec it should not match for the Everet airport which doesn't define the rule as the default value is false
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{ "$inverseMatch": {"path": "rule", "input": { "origin": "WA" }}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- with defaultResult true should return all documents that don't define the path and false shouldn't return them
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{ "$inverseMatch": {"path": "rule", "input": { "origin": "WA" }, "defaultResult": true}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document FROM bson_aggregation_pipeline('invmatch', '{ "aggregate": "airports", "pipeline": [{ "$inverseMatch": {"path": "rule", "input": { "origin": "WA" }, "defaultResult": false}}]}');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document FROM bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- add tests with lookup for RBAC "like" scenarios
SELECT helio_api.insert_one('invmatch','user_roles','{ "_id": 1, "user_id": 100, "roles": ["basic"]}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','user_roles','{ "_id"...
               ^
SELECT helio_api.insert_one('invmatch','user_roles','{ "_id": 2, "user_id": 101, "roles": ["basic", "sales"]}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','user_roles','{ "_id"...
               ^
SELECT helio_api.insert_one('invmatch','user_roles','{ "_id": 3, "user_id": 102, "roles": ["admin"]}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','user_roles','{ "_id"...
               ^
SELECT helio_api.insert_one('invmatch','sales','{ "_id": 1, "order": 100, "paid": true, "total": 0, "rule": {"roles": {"$in": ["basic", "sales", "admin"]}}}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','sales','{ "_id": 1, ...
               ^
SELECT helio_api.insert_one('invmatch','sales','{ "_id": 2, "order": 102, "paid": true, "total": 1000, "rule": {"roles": {"$in": ["sales", "admin"]}}}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','sales','{ "_id": 2, ...
               ^
SELECT helio_api.insert_one('invmatch','sales','{ "_id": 3, "order": 103, "paid": true, "total": 1000, "rule": {"roles": {"$in": ["admin"]}}}', NULL);
ERROR:  schema "helio_api" does not exist
LINE 1: SELECT helio_api.insert_one('invmatch','sales','{ "_id": 3, ...
               ^
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$lookup": { "from": "user_roles", "pipeline": [ { "$match": {"user_id": 100} } ], "as": "roles" }}, { "$inverseMatch": {"path": "rule", "input": "$roles"}}, {"$project": {"roles": 0, "rule": 0}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$lookup": { "from": "user_roles", "pipeline": [ { "$match": {"user_id": 101} } ], "as": "roles" }}, { "$inverseMatch": {"path": "rule", "input": "$roles"}}, {"$project": {"roles": 0, "rule": 0}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$lookup": { "from": "user_roles", "pipeline": [ { "$match": {"user_id": 102} } ], "as": "roles" }}, { "$inverseMatch": {"path": "rule", "input": "$roles"}}, {"$project": {"roles": 0, "rule": 0}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- use from collection instead of lookup (new feature)
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": 100}}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": 101}}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": 102}}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": 102}}, {"$project": {"roles": 1, "_id": 0}}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": { "$lt": 102 }}}, {"$limit": 1}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": { "$ne": 200 }}}, {"$limit": 1}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": { "$lte": 102 }}}, {"$limit": 2}]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": []}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
EXPLAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": { "$ne": 200 }}}, {"$limit": 1}]}} ], "cursor": {} }'); 
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: ...LAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggre...
                                                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
EXPLAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "user_roles", "pipeline": [{"$match": {"user_id": { "$ne": 200 }}}]}} ], "cursor": {} }'); 
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: ...LAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggre...
                                                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
EXPLAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": {}}} ], "cursor": {} }'); 
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: ...LAIN (COSTS OFF, VERBOSE ON) SELECT document from bson_aggre...
                                                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
-- negative cases
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": {}, "input": "$roles"}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "", "input": "$roles"}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": [true]}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": true}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "input": {}, "from": "collection"}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "collection"}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"rule": "rule"}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
SELECT document from bson_aggregation_pipeline('invmatch', '{ "aggregate": "sales", "pipeline": [ { "$inverseMatch": {"path": "rule", "from": "mycoll", "pipeline": []}} ], "cursor": {} }');
ERROR:  function bson_aggregation_pipeline(unknown, unknown) does not exist
LINE 1: SELECT document from bson_aggregation_pipeline('invmatch', '...
                             ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
